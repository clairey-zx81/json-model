//
// Generated by JSON Model Compiler version 2
// see https://github.com/clairey-zx81/json-model
//

// regular expression engine
#include <stddef.h>
#include <cre2.h>

#include <json-model.h>
#define JSON_MODEL_VERSION "2"

static jm_constant_t _jm_cst_0[128];
static bool json_model_1(const json_t *val, jm_path_t *path, jm_report_t *rep);
jm_propmap_t check_model_map_tab[1];
const size_t check_model_map_size = 1;


// check $ (.)
static bool json_model_1(const json_t *val, jm_path_t *path, jm_report_t *rep)
{
    // 256 string constants to partitionâ€¦
    // .
    return json_is_string(val) && jm_search_cst(&(jm_constant_t) { strlen(json_string_value(val)) + 1, { .s = json_string_value(val) } }, _jm_cst_0, 128);
}

jm_check_fun_t check_model_map(const char *pname)
{
    return jm_search_propmap(pname, check_model_map_tab, 1);
}

static bool initialized = false;

const char *check_model_init(void)
{
    if (!initialized)
    {
        initialized = true;
        jm_version_string = JSON_MODEL_VERSION;
        // initialize sorted set _jm_cst_0
        _jm_cst_0[0] = (jm_constant_t) { 3, { .s = "00" } };
        _jm_cst_0[1] = (jm_constant_t) { 3, { .s = "01" } };
        _jm_cst_0[2] = (jm_constant_t) { 3, { .s = "02" } };
        _jm_cst_0[3] = (jm_constant_t) { 3, { .s = "03" } };
        _jm_cst_0[4] = (jm_constant_t) { 3, { .s = "04" } };
        _jm_cst_0[5] = (jm_constant_t) { 3, { .s = "05" } };
        _jm_cst_0[6] = (jm_constant_t) { 3, { .s = "06" } };
        _jm_cst_0[7] = (jm_constant_t) { 3, { .s = "07" } };
        _jm_cst_0[8] = (jm_constant_t) { 3, { .s = "08" } };
        _jm_cst_0[9] = (jm_constant_t) { 3, { .s = "09" } };
        _jm_cst_0[10] = (jm_constant_t) { 3, { .s = "0a" } };
        _jm_cst_0[11] = (jm_constant_t) { 3, { .s = "0b" } };
        _jm_cst_0[12] = (jm_constant_t) { 3, { .s = "0c" } };
        _jm_cst_0[13] = (jm_constant_t) { 3, { .s = "0d" } };
        _jm_cst_0[14] = (jm_constant_t) { 3, { .s = "0e" } };
        _jm_cst_0[15] = (jm_constant_t) { 3, { .s = "0f" } };
        _jm_cst_0[16] = (jm_constant_t) { 3, { .s = "10" } };
        _jm_cst_0[17] = (jm_constant_t) { 3, { .s = "11" } };
        _jm_cst_0[18] = (jm_constant_t) { 3, { .s = "12" } };
        _jm_cst_0[19] = (jm_constant_t) { 3, { .s = "13" } };
        _jm_cst_0[20] = (jm_constant_t) { 3, { .s = "14" } };
        _jm_cst_0[21] = (jm_constant_t) { 3, { .s = "15" } };
        _jm_cst_0[22] = (jm_constant_t) { 3, { .s = "16" } };
        _jm_cst_0[23] = (jm_constant_t) { 3, { .s = "17" } };
        _jm_cst_0[24] = (jm_constant_t) { 3, { .s = "18" } };
        _jm_cst_0[25] = (jm_constant_t) { 3, { .s = "19" } };
        _jm_cst_0[26] = (jm_constant_t) { 3, { .s = "1a" } };
        _jm_cst_0[27] = (jm_constant_t) { 3, { .s = "1b" } };
        _jm_cst_0[28] = (jm_constant_t) { 3, { .s = "1c" } };
        _jm_cst_0[29] = (jm_constant_t) { 3, { .s = "1d" } };
        _jm_cst_0[30] = (jm_constant_t) { 3, { .s = "1e" } };
        _jm_cst_0[31] = (jm_constant_t) { 3, { .s = "1f" } };
        _jm_cst_0[32] = (jm_constant_t) { 3, { .s = "20" } };
        _jm_cst_0[33] = (jm_constant_t) { 3, { .s = "21" } };
        _jm_cst_0[34] = (jm_constant_t) { 3, { .s = "22" } };
        _jm_cst_0[35] = (jm_constant_t) { 3, { .s = "23" } };
        _jm_cst_0[36] = (jm_constant_t) { 3, { .s = "24" } };
        _jm_cst_0[37] = (jm_constant_t) { 3, { .s = "25" } };
        _jm_cst_0[38] = (jm_constant_t) { 3, { .s = "26" } };
        _jm_cst_0[39] = (jm_constant_t) { 3, { .s = "27" } };
        _jm_cst_0[40] = (jm_constant_t) { 3, { .s = "28" } };
        _jm_cst_0[41] = (jm_constant_t) { 3, { .s = "29" } };
        _jm_cst_0[42] = (jm_constant_t) { 3, { .s = "2a" } };
        _jm_cst_0[43] = (jm_constant_t) { 3, { .s = "2b" } };
        _jm_cst_0[44] = (jm_constant_t) { 3, { .s = "2c" } };
        _jm_cst_0[45] = (jm_constant_t) { 3, { .s = "2d" } };
        _jm_cst_0[46] = (jm_constant_t) { 3, { .s = "2e" } };
        _jm_cst_0[47] = (jm_constant_t) { 3, { .s = "2f" } };
        _jm_cst_0[48] = (jm_constant_t) { 3, { .s = "30" } };
        _jm_cst_0[49] = (jm_constant_t) { 3, { .s = "31" } };
        _jm_cst_0[50] = (jm_constant_t) { 3, { .s = "32" } };
        _jm_cst_0[51] = (jm_constant_t) { 3, { .s = "33" } };
        _jm_cst_0[52] = (jm_constant_t) { 3, { .s = "34" } };
        _jm_cst_0[53] = (jm_constant_t) { 3, { .s = "35" } };
        _jm_cst_0[54] = (jm_constant_t) { 3, { .s = "36" } };
        _jm_cst_0[55] = (jm_constant_t) { 3, { .s = "37" } };
        _jm_cst_0[56] = (jm_constant_t) { 3, { .s = "38" } };
        _jm_cst_0[57] = (jm_constant_t) { 3, { .s = "39" } };
        _jm_cst_0[58] = (jm_constant_t) { 3, { .s = "3a" } };
        _jm_cst_0[59] = (jm_constant_t) { 3, { .s = "3b" } };
        _jm_cst_0[60] = (jm_constant_t) { 3, { .s = "3c" } };
        _jm_cst_0[61] = (jm_constant_t) { 3, { .s = "3d" } };
        _jm_cst_0[62] = (jm_constant_t) { 3, { .s = "3e" } };
        _jm_cst_0[63] = (jm_constant_t) { 3, { .s = "3f" } };
        _jm_cst_0[64] = (jm_constant_t) { 3, { .s = "40" } };
        _jm_cst_0[65] = (jm_constant_t) { 3, { .s = "41" } };
        _jm_cst_0[66] = (jm_constant_t) { 3, { .s = "42" } };
        _jm_cst_0[67] = (jm_constant_t) { 3, { .s = "43" } };
        _jm_cst_0[68] = (jm_constant_t) { 3, { .s = "44" } };
        _jm_cst_0[69] = (jm_constant_t) { 3, { .s = "45" } };
        _jm_cst_0[70] = (jm_constant_t) { 3, { .s = "46" } };
        _jm_cst_0[71] = (jm_constant_t) { 3, { .s = "47" } };
        _jm_cst_0[72] = (jm_constant_t) { 3, { .s = "48" } };
        _jm_cst_0[73] = (jm_constant_t) { 3, { .s = "49" } };
        _jm_cst_0[74] = (jm_constant_t) { 3, { .s = "4a" } };
        _jm_cst_0[75] = (jm_constant_t) { 3, { .s = "4b" } };
        _jm_cst_0[76] = (jm_constant_t) { 3, { .s = "4c" } };
        _jm_cst_0[77] = (jm_constant_t) { 3, { .s = "4d" } };
        _jm_cst_0[78] = (jm_constant_t) { 3, { .s = "4e" } };
        _jm_cst_0[79] = (jm_constant_t) { 3, { .s = "4f" } };
        _jm_cst_0[80] = (jm_constant_t) { 3, { .s = "50" } };
        _jm_cst_0[81] = (jm_constant_t) { 3, { .s = "51" } };
        _jm_cst_0[82] = (jm_constant_t) { 3, { .s = "52" } };
        _jm_cst_0[83] = (jm_constant_t) { 3, { .s = "53" } };
        _jm_cst_0[84] = (jm_constant_t) { 3, { .s = "54" } };
        _jm_cst_0[85] = (jm_constant_t) { 3, { .s = "55" } };
        _jm_cst_0[86] = (jm_constant_t) { 3, { .s = "56" } };
        _jm_cst_0[87] = (jm_constant_t) { 3, { .s = "57" } };
        _jm_cst_0[88] = (jm_constant_t) { 3, { .s = "58" } };
        _jm_cst_0[89] = (jm_constant_t) { 3, { .s = "59" } };
        _jm_cst_0[90] = (jm_constant_t) { 3, { .s = "5a" } };
        _jm_cst_0[91] = (jm_constant_t) { 3, { .s = "5b" } };
        _jm_cst_0[92] = (jm_constant_t) { 3, { .s = "5c" } };
        _jm_cst_0[93] = (jm_constant_t) { 3, { .s = "5d" } };
        _jm_cst_0[94] = (jm_constant_t) { 3, { .s = "5e" } };
        _jm_cst_0[95] = (jm_constant_t) { 3, { .s = "5f" } };
        _jm_cst_0[96] = (jm_constant_t) { 3, { .s = "60" } };
        _jm_cst_0[97] = (jm_constant_t) { 3, { .s = "61" } };
        _jm_cst_0[98] = (jm_constant_t) { 3, { .s = "62" } };
        _jm_cst_0[99] = (jm_constant_t) { 3, { .s = "63" } };
        _jm_cst_0[100] = (jm_constant_t) { 3, { .s = "64" } };
        _jm_cst_0[101] = (jm_constant_t) { 3, { .s = "65" } };
        _jm_cst_0[102] = (jm_constant_t) { 3, { .s = "66" } };
        _jm_cst_0[103] = (jm_constant_t) { 3, { .s = "67" } };
        _jm_cst_0[104] = (jm_constant_t) { 3, { .s = "68" } };
        _jm_cst_0[105] = (jm_constant_t) { 3, { .s = "69" } };
        _jm_cst_0[106] = (jm_constant_t) { 3, { .s = "6a" } };
        _jm_cst_0[107] = (jm_constant_t) { 3, { .s = "6b" } };
        _jm_cst_0[108] = (jm_constant_t) { 3, { .s = "6c" } };
        _jm_cst_0[109] = (jm_constant_t) { 3, { .s = "6d" } };
        _jm_cst_0[110] = (jm_constant_t) { 3, { .s = "6e" } };
        _jm_cst_0[111] = (jm_constant_t) { 3, { .s = "6f" } };
        _jm_cst_0[112] = (jm_constant_t) { 3, { .s = "70" } };
        _jm_cst_0[113] = (jm_constant_t) { 3, { .s = "71" } };
        _jm_cst_0[114] = (jm_constant_t) { 3, { .s = "72" } };
        _jm_cst_0[115] = (jm_constant_t) { 3, { .s = "73" } };
        _jm_cst_0[116] = (jm_constant_t) { 3, { .s = "74" } };
        _jm_cst_0[117] = (jm_constant_t) { 3, { .s = "75" } };
        _jm_cst_0[118] = (jm_constant_t) { 3, { .s = "76" } };
        _jm_cst_0[119] = (jm_constant_t) { 3, { .s = "77" } };
        _jm_cst_0[120] = (jm_constant_t) { 3, { .s = "78" } };
        _jm_cst_0[121] = (jm_constant_t) { 3, { .s = "79" } };
        _jm_cst_0[122] = (jm_constant_t) { 3, { .s = "7a" } };
        _jm_cst_0[123] = (jm_constant_t) { 3, { .s = "7b" } };
        _jm_cst_0[124] = (jm_constant_t) { 3, { .s = "7c" } };
        _jm_cst_0[125] = (jm_constant_t) { 3, { .s = "7d" } };
        _jm_cst_0[126] = (jm_constant_t) { 3, { .s = "7e" } };
        _jm_cst_0[127] = (jm_constant_t) { 3, { .s = "7f" } };
        jm_sort_cst(_jm_cst_0, 128);
        check_model_map_tab[0] = (jm_propmap_t) { "", json_model_1 };
        jm_sort_propmap(check_model_map_tab, 1);
    }
    return NULL;
}

void check_model_free(void)
{
    if (initialized)
        initialized = false;

        // cleanup code
}

/*
 * # API
 *
 * ```c
 * bool error;
 * char *message;
 *
 * bool valid = check(json_value, "model-name", &error, &message);
 *
 * if (message)
 *    free(message), message = NULL;
 * ```
 *
 * - `error` is set of there was an error during initialization or if the model does not exists.
 * - `message` is provided if a non NULL pointer is passed, and must be freed by the caller.
 */
bool
check_model(const json_t *val, const char *name, bool *error, char **reasons)
{
    return jm_generic_entry(check_model_init, check_model_map, val, name, error, reasons);
}
