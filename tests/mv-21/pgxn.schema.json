{
  "$comment": "JSON Schema generated by JSON Model Compiler",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$defs": {
    "neStr": {
      "type": "string",
      "pattern": "."
    },
    "neStrList": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/neStr"
      },
      "minItems": 1,
      "uniqueItems": true
    },
    "License": {
      "enum": [
        "agpl_3",
        "apache_1_1",
        "apache_2_0",
        "artistic_1",
        "artistic_2",
        "bsd",
        "freebsd",
        "gfdl_1_2",
        "gfdl_1_3",
        "gpl_1",
        "gpl_2",
        "gpl_3",
        "lgpl_2_1",
        "lgpl_3_0",
        "mit",
        "mozilla_1_0",
        "mozilla_1_1",
        "openssl",
        "perl_5",
        "postgresql",
        "qpl_1_0",
        "ssleay",
        "sun",
        "zlib",
        "open_source",
        "restricted",
        "unrestricted",
        "unknown"
      ]
    },
    "LicenseList": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/License"
      },
      "minItems": 1,
      "uniqueItems": true
    },
    "Provide": {
      "type": "object",
      "patternProperties": {
        "^[Xx]_": true
      },
      "properties": {
        "file": {
          "type": "string"
        },
        "version": {
          "$ref": "#/$defs/Version"
        },
        "abstract": {
          "type": "string"
        },
        "docfile": {
          "type": "string"
        }
      },
      "required": [
        "file",
        "version"
      ],
      "additionalProperties": false
    },
    "Status": {
      "enum": [
        "stable",
        "testing",
        "unstable"
      ]
    },
    "Resources": {
      "type": "object",
      "properties": {
        "homepage": {
          "type": "string",
          "format": "uri"
        },
        "bugtracker": {
          "type": "object",
          "patternProperties": {
            "^[Xx]_": true
          },
          "properties": {
            "web": {
              "type": "string",
              "format": "uri"
            },
            "mailto": {
              "type": "string",
              "format": "email"
            }
          },
          "additionalProperties": false
        },
        "repository": {
          "type": "object",
          "properties": {
            "url": {
              "type": "string",
              "format": "uri"
            },
            "web": {
              "type": "string",
              "format": "uri"
            },
            "type": {
              "type": "string",
              "pattern": "."
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "SemVer": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+[-_A-Za-z0-9]*$"
    },
    "Version": {
      "anyOf": [
        {
          "$ref": "#/$defs/SemVer"
        },
        {
          "const": 0
        }
      ]
    },
    "Ops": {
      "type": "string",
      "pattern": "^(<=|<|>=|>|!=|==)$"
    },
    "VersionRange": {
      "type": "string",
      "pattern": "^\\s*(<=|<|>=|>|!=|==)\\s*(\\d+\\.\\d+\\.\\d+[-_A-Za-z0-9]*)\\s*(,\\s*(<=|<|>=|>|!=|==)\\s*(\\d+\\.\\d+\\.\\d+[-_A-Za-z0-9]*))*\\s*$"
    },
    "Phase": {
      "enum": [
        "configure",
        "build",
        "test",
        "runtime",
        "develop"
      ]
    },
    "Relation": {
      "enum": [
        "requires",
        "recommends",
        "suggests",
        "conflicts"
      ]
    },
    "Prereq": {
      "type": "object",
      "additionalProperties": {
        "anyOf": [
          {
            "$ref": "#/$defs/Version"
          },
          {
            "$ref": "#/$defs/VersionRange"
          }
        ]
      }
    },
    "Prereqs": {
      "type": "object",
      "patternProperties": {
        "^[Xx]_": true,
        "(^configure$|^build$|^test$|^runtime$|^develop$)": {
          "type": "object",
          "patternProperties": {
            "^[Xx]_": true,
            "(^requires$|^recommends$|^suggests$|^conflicts$)": {
              "$ref": "#/$defs/Prereq"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  },
  "type": "object",
  "patternProperties": {
    "^[Xx]_": true
  },
  "properties": {
    "name": {
      "$ref": "#/$defs/neStr"
    },
    "version": {
      "type": "string"
    },
    "abstract": {
      "type": "string"
    },
    "maintainer": {
      "anyOf": [
        {
          "$ref": "#/$defs/neStr"
        },
        {
          "$ref": "#/$defs/neStrList"
        }
      ]
    },
    "license": {
      "oneOf": [
        {
          "$ref": "#/$defs/License"
        },
        {
          "$ref": "#/$defs/LicenseList"
        },
        {
          "type": "object",
          "additionalProperties": {
            "type": "string",
            "format": "uri"
          }
        }
      ]
    },
    "provides": {
      "type": "object",
      "additionalProperties": {
        "$ref": "#/$defs/Provide"
      }
    },
    "meta-spec": {
      "type": "object",
      "patternProperties": {
        "^[Xx]_": true
      },
      "properties": {
        "version": {
          "const": "1.0.0"
        },
        "url": {
          "type": "string",
          "format": "uri"
        }
      },
      "required": [
        "version"
      ],
      "additionalProperties": false
    },
    "url": {
      "type": "string",
      "format": "uri"
    },
    "description": {
      "type": "string"
    },
    "generated_by": {
      "type": "string"
    },
    "tags": {
      "$ref": "#/$defs/neStrList"
    },
    "no_index": {
      "type": "object",
      "properties": {
        "file": {
          "$ref": "#/$defs/neStrList"
        },
        "directory": {
          "$ref": "#/$defs/neStrList"
        }
      },
      "additionalProperties": false
    },
    "release_status": {
      "$ref": "#/$defs/Status"
    },
    "resources": {
      "$ref": "#/$defs/Resources"
    },
    "prereqs": {
      "$ref": "#/$defs/Prereqs"
    }
  },
  "required": [
    "name",
    "version",
    "abstract",
    "maintainer",
    "license",
    "provides",
    "meta-spec"
  ],
  "additionalProperties": false
}
