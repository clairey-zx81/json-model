{
  "$comment": "JSON Schema generated by JSON Model Compiler",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$defs": {
    "Url": {
      "type": "string",
      "pattern": "^((file|https?)://.+|\\./.*|\\.\\./.*)$"
    },
    "PreDef": {
      "enum": [
        "$DATE",
        "$TIME",
        "$DATETIME",
        "$URL",
        "$URI",
        "$UUID",
        "$EMAIL",
        "$REGEX",
        "$EXREG",
        "$NULL",
        "$BOOL",
        "$FLOAT",
        "$F16",
        "$F32",
        "$F64",
        "$NUMBER",
        "$INT",
        "$INTEGER",
        "$I8",
        "$I16",
        "$I32",
        "$I64",
        "$U8",
        "$U16",
        "$U32",
        "$U64",
        "$STRING",
        "$NONE",
        "$ANY"
      ]
    },
    "Identifier": {
      "allOf": [
        {
          "type": "string",
          "pattern": "^\\w(\\w|-)*$"
        },
        {
          "type": "string",
          "pattern": "[^A-Z0-9]"
        }
      ]
    },
    "ArrayComment": {
      "type": "string",
      "pattern": "^#"
    },
    "ObjectComment": {
      "type": "object",
      "patternProperties": {
        "^#": true
      },
      "properties": {
        "#": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "Ref": {
      "type": "string",
      "pattern": "^\\$."
    },
    "ValConst": {
      "type": "string",
      "pattern": "^=(null|true|false|[-+]?\\d+(\\.\\d+)?([Ee][-+]?\\d+)?)$"
    },
    "StrConst": {
      "type": "string",
      "pattern": "^[A-Za-z0-9_]"
    },
    "Regex": {
      "anyOf": [
        {
          "type": "string",
          "pattern": "^/(.*)/[a-z]*X[a-z]*$"
        },
        {
          "type": "string",
          "pattern": "^/(.*)/[a-z]*$"
        }
      ]
    },
    "Name": {
      "type": "string",
      "pattern": "^\\..+$"
    },
    "CmpValue": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "number"
        },
        {
          "type": "string"
        }
      ]
    },
    "EqValue": {
      "anyOf": [
        {
          "type": "null"
        },
        {
          "type": "boolean"
        },
        {
          "$ref": "#/$defs/CmpValue"
        }
      ]
    },
    "ValModel": {
      "enum": [
        null,
        true,
        0,
        1,
        -1,
        0.0,
        1.0,
        -1.0
      ]
    },
    "StrModel": {
      "anyOf": [
        {
          "$ref": "#/$defs/StrConst"
        },
        {
          "$ref": "#/$defs/ValConst"
        },
        {
          "$ref": "#/$defs/Regex"
        },
        {
          "$ref": "#/$defs/PreDef"
        },
        {
          "$ref": "#/$defs/Ref"
        },
        {
          "const": ""
        }
      ]
    },
    "Any": true,
    "None": false,
    "Array": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "$ref": "#/$defs/Model"
          },
          {
            "$ref": "#/$defs/ArrayComment"
          }
        ]
      }
    },
    "Common": {
      "$ref": "#/$defs/ObjectComment"
    },
    "Constraint": {
      "type": "object",
      "patternProperties": {
        "^(<=|>=|<|>)$": {
          "$ref": "#/$defs/CmpValue"
        },
        "^(=|!=)$": {
          "$ref": "#/$defs/EqValue"
        }
      },
      "properties": {
        "@": {
          "$ref": "#/$defs/Model"
        },
        "!": {
          "type": "boolean"
        }
      },
      "required": [
        "@"
      ],
      "additionalProperties": false
    },
    "Or": {
      "type": "object",
      "properties": {
        "|": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Model"
          }
        }
      },
      "required": [
        "|"
      ],
      "additionalProperties": false
    },
    "And": {
      "type": "object",
      "properties": {
        "&": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Model"
          }
        }
      },
      "required": [
        "&"
      ],
      "additionalProperties": false
    },
    "Xor": {
      "type": "object",
      "properties": {
        "^": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Model"
          }
        }
      },
      "required": [
        "^"
      ],
      "additionalProperties": false
    },
    "Add": {
      "type": "object",
      "properties": {
        "+": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Model"
          }
        }
      },
      "required": [
        "+"
      ],
      "additionalProperties": false
    },
    "Prop": {
      "anyOf": [
        {
          "type": "string",
          "pattern": "^[?!]"
        },
        {
          "$ref": "#/$defs/StrConst"
        },
        {
          "$ref": "#/$defs/Regex"
        },
        {
          "$ref": "#/$defs/Ref"
        },
        {
          "$ref": "#/$defs/Name"
        },
        {
          "const": ""
        }
      ]
    },
    "Obj": {
      "type": "object",
      "patternProperties": {
        "(^[?!]|^[A-Za-z0-9_]|(^/(.*)/[a-z]*X[a-z]*$|^/(.*)/[a-z]*$)|^\\$.|^\\..+$|^$)": {
          "$ref": "#/$defs/Model"
        }
      },
      "additionalProperties": false
    },
    "Elem": {
      "anyOf": [
        {
          "$ref": "#/$defs/Constraint"
        },
        {
          "$ref": "#/$defs/Or"
        },
        {
          "$ref": "#/$defs/And"
        },
        {
          "$ref": "#/$defs/Xor"
        },
        {
          "$ref": "#/$defs/Add"
        },
        {
          "$ref": "#/$defs/Obj"
        }
      ]
    },
    "Element": {
      "anyOf": [
        {
          "type": "object",
          "patternProperties": {
            "^#": true,
            "^(<=|>=|<|>)$": {
              "$ref": "#/$defs/CmpValue"
            },
            "^(=|!=)$": {
              "$ref": "#/$defs/EqValue"
            }
          },
          "properties": {
            "@": {
              "$ref": "#/$defs/Model"
            },
            "#": {
              "type": "string"
            },
            "!": {
              "type": "boolean"
            }
          },
          "required": [
            "@"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "patternProperties": {
            "^#": true
          },
          "properties": {
            "|": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/Model"
              }
            },
            "#": {
              "type": "string"
            }
          },
          "required": [
            "|"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "patternProperties": {
            "^#": true
          },
          "properties": {
            "&": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/Model"
              }
            },
            "#": {
              "type": "string"
            }
          },
          "required": [
            "&"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "patternProperties": {
            "^#": true
          },
          "properties": {
            "^": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/Model"
              }
            },
            "#": {
              "type": "string"
            }
          },
          "required": [
            "^"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "patternProperties": {
            "^#": true
          },
          "properties": {
            "+": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/Model"
              }
            },
            "#": {
              "type": "string"
            }
          },
          "required": [
            "+"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "patternProperties": {
            "^#": true,
            "(^[?!]|^[A-Za-z0-9_]|(^/(.*)/[a-z]*X[a-z]*$|^/(.*)/[a-z]*$)|^\\$.|^\\..+$|^$)": {
              "$ref": "#/$defs/Model"
            }
          },
          "properties": {
            "#": {
              "type": "string"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "Trafo": {
      "description": "remove, rename or add stuff",
      "type": "object",
      "properties": {
        "/": {
          "anyOf": [
            {
              "$ref": "#/$defs/EqValue"
            },
            {
              "type": "array",
              "items": true
            }
          ]
        },
        "~": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "*": true
      },
      "additionalProperties": false
    },
    "Transformation": {
      "anyOf": [
        {
          "$ref": "#/$defs/Model"
        },
        {
          "type": "object",
          "patternProperties": {
            "^#": true
          },
          "properties": {
            "#": {
              "type": "string"
            },
            "/": {
              "anyOf": [
                {
                  "$ref": "#/$defs/EqValue"
                },
                {
                  "type": "array",
                  "items": true
                }
              ]
            },
            "~": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "*": true
          },
          "additionalProperties": false
        }
      ]
    },
    "ScalarModel": {
      "anyOf": [
        {
          "$ref": "#/$defs/ValModel"
        },
        {
          "$ref": "#/$defs/StrModel"
        }
      ]
    },
    "Model": {
      "anyOf": [
        {
          "$ref": "#/$defs/ScalarModel"
        },
        {
          "$ref": "#/$defs/Array"
        },
        {
          "$ref": "#/$defs/Element"
        }
      ]
    },
    "Defs": {
      "type": "object",
      "patternProperties": {
        "(?s)^.*$": {
          "$ref": "#/$defs/Model"
        }
      },
      "properties": {
        "": {
          "$ref": "#/$defs/Url"
        }
      },
      "additionalProperties": false
    },
    "Rename": {
      "type": "object",
      "patternProperties": {
        "^\\..+$": {
          "type": "string",
          "pattern": "^([#|&^+/*@~=$%]|[<>!]=?)$"
        }
      },
      "additionalProperties": false
    },
    "Rewrite": {
      "type": "object",
      "patternProperties": {
        "^\\$.*$": {
          "$ref": "#/$defs/Transformation"
        }
      },
      "additionalProperties": false
    },
    "Import": {
      "type": "object",
      "properties": {
        "<": {
          "anyOf": [
            {
              "$ref": "#/$defs/Ref"
            },
            {
              "type": "array",
              "items": {
                "$ref": "#/$defs/Ref"
              }
            }
          ]
        }
      },
      "additionalProperties": false
    },
    "RootOnly": {
      "description": "symbols that can only appear at the model's root",
      "type": "object",
      "properties": {
        "~": {
          "$ref": "#/$defs/Url"
        },
        "$": {
          "type": "object",
          "patternProperties": {
            "^#": true,
            "(?s)^.*$": {
              "$ref": "#/$defs/Model"
            }
          },
          "properties": {
            "#": {
              "type": "string"
            },
            "": {
              "$ref": "#/$defs/Url"
            }
          },
          "additionalProperties": false
        },
        "%": {
          "type": "object",
          "patternProperties": {
            "^#": true,
            "^\\$.*$": {
              "$ref": "#/$defs/Transformation"
            },
            "^\\..+$": {
              "type": "string",
              "pattern": "^([#|&^+/*@~=$%]|[<>!]=?)$"
            }
          },
          "properties": {
            "#": {
              "type": "string"
            },
            "<": {
              "anyOf": [
                {
                  "$ref": "#/$defs/Ref"
                },
                {
                  "type": "array",
                  "items": {
                    "$ref": "#/$defs/Ref"
                  }
                }
              ]
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "Root": {
      "anyOf": [
        {
          "type": "object",
          "patternProperties": {
            "^#": true,
            "^(<=|>=|<|>)$": {
              "$ref": "#/$defs/CmpValue"
            },
            "^(=|!=)$": {
              "$ref": "#/$defs/EqValue"
            }
          },
          "properties": {
            "@": {
              "$ref": "#/$defs/Model"
            },
            "~": {
              "$ref": "#/$defs/Url"
            },
            "$": {
              "type": "object",
              "patternProperties": {
                "^#": true,
                "(?s)^.*$": {
                  "$ref": "#/$defs/Model"
                }
              },
              "properties": {
                "#": {
                  "type": "string"
                },
                "": {
                  "$ref": "#/$defs/Url"
                }
              },
              "additionalProperties": false
            },
            "%": {
              "type": "object",
              "patternProperties": {
                "^#": true,
                "^\\$.*$": {
                  "$ref": "#/$defs/Transformation"
                },
                "^\\..+$": {
                  "type": "string",
                  "pattern": "^([#|&^+/*@~=$%]|[<>!]=?)$"
                }
              },
              "properties": {
                "#": {
                  "type": "string"
                },
                "<": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/Ref"
                    },
                    {
                      "type": "array",
                      "items": {
                        "$ref": "#/$defs/Ref"
                      }
                    }
                  ]
                }
              },
              "additionalProperties": false
            },
            "#": {
              "type": "string"
            },
            "!": {
              "type": "boolean"
            }
          },
          "required": [
            "@"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "patternProperties": {
            "^#": true
          },
          "properties": {
            "|": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/Model"
              }
            },
            "~": {
              "$ref": "#/$defs/Url"
            },
            "$": {
              "type": "object",
              "patternProperties": {
                "^#": true,
                "(?s)^.*$": {
                  "$ref": "#/$defs/Model"
                }
              },
              "properties": {
                "#": {
                  "type": "string"
                },
                "": {
                  "$ref": "#/$defs/Url"
                }
              },
              "additionalProperties": false
            },
            "%": {
              "type": "object",
              "patternProperties": {
                "^#": true,
                "^\\$.*$": {
                  "$ref": "#/$defs/Transformation"
                },
                "^\\..+$": {
                  "type": "string",
                  "pattern": "^([#|&^+/*@~=$%]|[<>!]=?)$"
                }
              },
              "properties": {
                "#": {
                  "type": "string"
                },
                "<": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/Ref"
                    },
                    {
                      "type": "array",
                      "items": {
                        "$ref": "#/$defs/Ref"
                      }
                    }
                  ]
                }
              },
              "additionalProperties": false
            },
            "#": {
              "type": "string"
            }
          },
          "required": [
            "|"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "patternProperties": {
            "^#": true
          },
          "properties": {
            "&": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/Model"
              }
            },
            "~": {
              "$ref": "#/$defs/Url"
            },
            "$": {
              "type": "object",
              "patternProperties": {
                "^#": true,
                "(?s)^.*$": {
                  "$ref": "#/$defs/Model"
                }
              },
              "properties": {
                "#": {
                  "type": "string"
                },
                "": {
                  "$ref": "#/$defs/Url"
                }
              },
              "additionalProperties": false
            },
            "%": {
              "type": "object",
              "patternProperties": {
                "^#": true,
                "^\\$.*$": {
                  "$ref": "#/$defs/Transformation"
                },
                "^\\..+$": {
                  "type": "string",
                  "pattern": "^([#|&^+/*@~=$%]|[<>!]=?)$"
                }
              },
              "properties": {
                "#": {
                  "type": "string"
                },
                "<": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/Ref"
                    },
                    {
                      "type": "array",
                      "items": {
                        "$ref": "#/$defs/Ref"
                      }
                    }
                  ]
                }
              },
              "additionalProperties": false
            },
            "#": {
              "type": "string"
            }
          },
          "required": [
            "&"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "patternProperties": {
            "^#": true
          },
          "properties": {
            "^": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/Model"
              }
            },
            "~": {
              "$ref": "#/$defs/Url"
            },
            "$": {
              "type": "object",
              "patternProperties": {
                "^#": true,
                "(?s)^.*$": {
                  "$ref": "#/$defs/Model"
                }
              },
              "properties": {
                "#": {
                  "type": "string"
                },
                "": {
                  "$ref": "#/$defs/Url"
                }
              },
              "additionalProperties": false
            },
            "%": {
              "type": "object",
              "patternProperties": {
                "^#": true,
                "^\\$.*$": {
                  "$ref": "#/$defs/Transformation"
                },
                "^\\..+$": {
                  "type": "string",
                  "pattern": "^([#|&^+/*@~=$%]|[<>!]=?)$"
                }
              },
              "properties": {
                "#": {
                  "type": "string"
                },
                "<": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/Ref"
                    },
                    {
                      "type": "array",
                      "items": {
                        "$ref": "#/$defs/Ref"
                      }
                    }
                  ]
                }
              },
              "additionalProperties": false
            },
            "#": {
              "type": "string"
            }
          },
          "required": [
            "^"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "patternProperties": {
            "^#": true
          },
          "properties": {
            "+": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/Model"
              }
            },
            "~": {
              "$ref": "#/$defs/Url"
            },
            "$": {
              "type": "object",
              "patternProperties": {
                "^#": true,
                "(?s)^.*$": {
                  "$ref": "#/$defs/Model"
                }
              },
              "properties": {
                "#": {
                  "type": "string"
                },
                "": {
                  "$ref": "#/$defs/Url"
                }
              },
              "additionalProperties": false
            },
            "%": {
              "type": "object",
              "patternProperties": {
                "^#": true,
                "^\\$.*$": {
                  "$ref": "#/$defs/Transformation"
                },
                "^\\..+$": {
                  "type": "string",
                  "pattern": "^([#|&^+/*@~=$%]|[<>!]=?)$"
                }
              },
              "properties": {
                "#": {
                  "type": "string"
                },
                "<": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/Ref"
                    },
                    {
                      "type": "array",
                      "items": {
                        "$ref": "#/$defs/Ref"
                      }
                    }
                  ]
                }
              },
              "additionalProperties": false
            },
            "#": {
              "type": "string"
            }
          },
          "required": [
            "+"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "patternProperties": {
            "^#": true,
            "(^[?!]|^[A-Za-z0-9_]|(^/(.*)/[a-z]*X[a-z]*$|^/(.*)/[a-z]*$)|^\\$.|^\\..+$|^$)": {
              "$ref": "#/$defs/Model"
            }
          },
          "properties": {
            "~": {
              "$ref": "#/$defs/Url"
            },
            "$": {
              "type": "object",
              "patternProperties": {
                "^#": true,
                "(?s)^.*$": {
                  "$ref": "#/$defs/Model"
                }
              },
              "properties": {
                "#": {
                  "type": "string"
                },
                "": {
                  "$ref": "#/$defs/Url"
                }
              },
              "additionalProperties": false
            },
            "%": {
              "type": "object",
              "patternProperties": {
                "^#": true,
                "^\\$.*$": {
                  "$ref": "#/$defs/Transformation"
                },
                "^\\..+$": {
                  "type": "string",
                  "pattern": "^([#|&^+/*@~=$%]|[<>!]=?)$"
                }
              },
              "properties": {
                "#": {
                  "type": "string"
                },
                "<": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/Ref"
                    },
                    {
                      "type": "array",
                      "items": {
                        "$ref": "#/$defs/Ref"
                      }
                    }
                  ]
                }
              },
              "additionalProperties": false
            },
            "#": {
              "type": "string"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "RootModel": {
      "anyOf": [
        {
          "$ref": "#/$defs/ScalarModel"
        },
        {
          "$ref": "#/$defs/Array"
        },
        {
          "$ref": "#/$defs/Root"
        }
      ]
    }
  },
  "$ref": "#/$defs/RootModel"
}
